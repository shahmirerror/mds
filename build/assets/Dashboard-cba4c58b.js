import{r as l,j as e,a as f}from"./app-abf259ba.js";import{A as y}from"./AuthenticatedLayout-72ed3d24.js";import"./react-apexcharts.min-39a8ed98.js";import{Q as F,B as g}from"./ReactToastify-27ea926f.js";import"./index-2a8e9ad7.js";function R(d){const[i,j]=l.useState("Fetching..."),[c,N]=l.useState("Fetching..."),[r,n]=l.useState(null),[p,o]=l.useState("Fetching..."),[v,h]=l.useState("Fetching..."),[u,m]=l.useState("Fetching..."),[b,x]=l.useState("Fetching..."),w=a=>{n(null),o("Fetching..."),h("Fetching..."),m("Fetching..."),x("Fetching...");try{const t=fetch(route("admin.centre.stats",a),{method:"GET"}).then(s=>s.json()).then(s=>{n(s.country_cases),o(s.cancelled_cases),h(s.reports_issued),m(s.reports_in_hand),x(s.last_lab_update),j(s.fit),N(s.unfit)},s=>{console.log(s),g.error("Something went wrong! Please try again :(",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})}catch(t){console.log(t),g.error("Something went wrong! Please try again :(",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}};return l.useEffect(()=>{w(d.auth.user.centre.centre_id)},[]),e.jsxs(y,{user:d.auth.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx(f,{title:"Dashboard"}),e.jsx(F,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),e.jsx("div",{className:"page-header d-print-none",children:e.jsx("div",{className:"container-xl",children:e.jsx("div",{className:"row g-2 align-items-center",children:e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"page-pretitle",children:"Overview"}),e.jsx("h2",{className:"page-title",children:"Dashboard"})]})})})}),e.jsx("div",{className:"page-body",children:e.jsx("div",{className:"container-xl",children:e.jsxs("div",{className:"row row-deck row-cards",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"row row-cards",children:[e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card card-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("span",{className:"bg-danger text-white avatar"})}),e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"font-weight-medium",children:["Cancelled Cases ",e.jsx("span",{className:"badge bg-info text-white",style:{fontSize:"10px"},children:"Today"})]}),e.jsx("div",{className:"text-secondary",children:p})]})]})})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card card-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("span",{className:"bg-twitter text-white avatar"})}),e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"font-weight-medium",children:["Reports Issued ",e.jsx("span",{className:"badge bg-info text-white",style:{fontSize:"10px"},children:"Current Month"})]}),e.jsx("div",{className:"text-secondary",children:v})]})]})})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card card-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("span",{className:"bg-success text-white avatar"})}),e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"font-weight-medium",children:["Reports In-Hand ",e.jsx("span",{className:"badge bg-info text-white",style:{fontSize:"10px"},children:"Current Month"})]}),e.jsx("div",{className:"text-secondary",children:u})]})]})})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card card-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("span",{className:"bg-black text-white avatar"})}),e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"font-weight-medium",children:"Last Lab Result Updated At"}),e.jsx("div",{className:"text-secondary",children:b})]})]})})})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"row row-cards",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{className:"mb-3",children:["Out of ",e.jsx("strong",{children:i=="Fetching..."?"Fetching...":i+c})," cases this month"]}),e.jsxs("div",{className:"progress progress-separated mb-3",children:[e.jsx("div",{className:"progress-bar bg-primary",role:"progressbar",style:{width:`${i/(i+c)}%`},"aria-label":"FIT"}),e.jsx("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:`${c/(i+c)}%`},"aria-label":"UNFIT"})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-auto d-flex align-items-center pe-2",children:[e.jsx("span",{className:"legend me-2 bg-primary"}),e.jsx("span",{children:"FIT"}),e.jsxs("span",{className:"d-none d-md-inline d-lg-none d-xxl-inline ms-2 text-secondary",children:[i," cases"]})]}),e.jsxs("div",{className:"col-auto d-flex align-items-center px-2",children:[e.jsx("span",{className:"legend me-2 bg-info"}),e.jsx("span",{children:"UNFIT"}),e.jsxs("span",{className:"d-none d-md-inline d-lg-none d-xxl-inline ms-2 text-secondary",children:[c," cases"]})]})]})]})})})})}),e.jsx("div",{className:"col-md-6 col-lg-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Current Registered Cases"})}),e.jsxs("table",{className:"table card-table table-vcenter",children:[(r==null?void 0:r.length)!=null?e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Country"}),e.jsx("th",{colSpan:"2",children:"Cases"})]})}):e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{colSpan:"3",children:"Fetching..."})})}),e.jsx("tbody",{children:(r==null?void 0:r.length)>0?r.map((a,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:a==null?void 0:a.country}),e.jsx("td",{children:a==null?void 0:a.cases}),e.jsx("td",{className:"w-50",children:e.jsx("div",{className:"progress progress-xs",children:e.jsx("div",{className:"progress-bar bg-primary",style:{width:"71.0%"}})})})]})):e.jsx(e.Fragment,{})})]})]})})]})})})]})}export{R as default};
