import{r as l,j as e,a as F}from"./app-0d67f603.js";import{A as S}from"./AuthenticatedLayout-bbe634f8.js";import"./react-apexcharts.min-043b0aa4.js";import{S as O}from"./react-select.esm-8a2a868e.js";import{Q as _,B as N}from"./ReactToastify-0d882170.js";import"./index-6d6d55e9.js";function P(i){const[t,p]=l.useState("Fetching..."),[c,v]=l.useState("Fetching..."),[n,u]=l.useState(i.centres[0]),[r,d]=l.useState(null),[b,o]=l.useState("Fetching..."),[f,h]=l.useState("Fetching..."),[w,m]=l.useState("Fetching..."),[y,x]=l.useState("Fetching..."),C=s=>{u(s),j(s.value)},j=s=>{d(null),o("Fetching..."),h("Fetching..."),m("Fetching..."),x("Fetching...");try{const g=fetch(route("super.centre.stats",s),{method:"GET"}).then(a=>a.json()).then(a=>{d(a.country_cases),o(a.cancelled_cases),h(a.reports_issued),m(a.reports_in_hand),x(a.last_lab_update),p(a.fit),v(a.unfit)},a=>{N.error("Something went wrong! Please try again :(",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})}catch{N.error("Something went wrong! Please try again :(",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}};return l.useEffect(()=>{j(n.value)},[]),e.jsxs(S,{user:i.auth.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx(F,{title:"Dashboard"}),e.jsx(_,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),e.jsx("div",{className:"page-header d-print-none",children:e.jsx("div",{className:"container-xl",children:e.jsx("div",{className:"row g-2 align-items-center",children:e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"page-pretitle",children:"Overview"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("h2",{className:"page-title",children:"Dashboard"}),e.jsx(O,{options:i.centres,value:n,name:"centre",className:"w-25",onChange:C})]})]})})})}),e.jsx("div",{className:"page-body",children:e.jsx("div",{className:"container-xl",children:e.jsxs("div",{className:"row row-deck row-cards",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"row row-cards",children:[e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card card-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("span",{className:"bg-danger text-white avatar"})}),e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"font-weight-medium",children:["Cancelled Cases ",e.jsx("span",{className:"badge bg-info text-white",style:{fontSize:"10px"},children:"Today"})]}),e.jsx("div",{className:"text-secondary",children:b})]})]})})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card card-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("span",{className:"bg-twitter text-white avatar"})}),e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"font-weight-medium",children:["Reports Issued ",e.jsx("span",{className:"badge bg-info text-white",style:{fontSize:"10px"},children:"Current Month"})]}),e.jsx("div",{className:"text-secondary",children:f})]})]})})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card card-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("span",{className:"bg-success text-white avatar"})}),e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"font-weight-medium",children:["Reports In-Hand ",e.jsx("span",{className:"badge bg-info text-white",style:{fontSize:"10px"},children:"Current Month"})]}),e.jsx("div",{className:"text-secondary",children:w})]})]})})})}),e.jsx("div",{className:"col-sm-6 col-lg-3",children:e.jsx("div",{className:"card card-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("span",{className:"bg-black text-white avatar"})}),e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"font-weight-medium",children:"Last Lab Result Updated At"}),e.jsx("div",{className:"text-secondary",children:y})]})]})})})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsx("div",{className:"row row-cards",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{className:"mb-3",children:["Out of ",e.jsx("strong",{children:t=="Fetching..."?"Fetching...":t+c})," cases this month"]}),e.jsxs("div",{className:"progress progress-separated mb-3",children:[e.jsx("div",{className:"progress-bar bg-primary",role:"progressbar",style:{width:`${t/(t+c)}%`},"aria-label":"FIT"}),e.jsx("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:`${c/(t+c)}%`},"aria-label":"UNFIT"})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-auto d-flex align-items-center pe-2",children:[e.jsx("span",{className:"legend me-2 bg-primary"}),e.jsx("span",{children:"FIT"}),e.jsxs("span",{className:"d-none d-md-inline d-lg-none d-xxl-inline ms-2 text-secondary",children:[t," cases"]})]}),e.jsxs("div",{className:"col-auto d-flex align-items-center px-2",children:[e.jsx("span",{className:"legend me-2 bg-info"}),e.jsx("span",{children:"UNFIT"}),e.jsxs("span",{className:"d-none d-md-inline d-lg-none d-xxl-inline ms-2 text-secondary",children:[c," cases"]})]})]})]})})})})}),e.jsx("div",{className:"col-md-6 col-lg-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Current Registered Cases"})}),e.jsxs("table",{className:"table card-table table-vcenter",children:[(r==null?void 0:r.length)!=null?e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Country"}),e.jsx("th",{colSpan:"2",children:"Cases"})]})}):e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{colSpan:"3",children:"Fetching..."})})}),e.jsx("tbody",{children:(r==null?void 0:r.length)>0?r.map((s,g)=>e.jsxs("tr",{children:[e.jsx("td",{children:s==null?void 0:s.country}),e.jsx("td",{children:s==null?void 0:s.cases}),e.jsx("td",{className:"w-50",children:e.jsx("div",{className:"progress progress-xs",children:e.jsx("div",{className:"progress-bar bg-primary",style:{width:"71.0%"}})})})]})):e.jsx(e.Fragment,{})})]})]})})]})})})]})}export{P as default};
